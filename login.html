<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ScaleShield ‚Äî Client Login</title>

<style>
:root{
  --bg:#07080B;
  --panel:rgba(255,255,255,.05);
  --border:rgba(255,255,255,.10);
  --gold:#D6B15E;
  --gold2:#F2D27A;
  --text:#fff;
  --muted:rgba(255,255,255,.65);
  --muted2:rgba(255,255,255,.45);
  --radius:22px;
  --ease:cubic-bezier(.2,.8,.2,1);
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:
    radial-gradient(900px circle at 50% -20%, rgba(214,177,94,.16), transparent 55%),
    radial-gradient(800px circle at 85% 5%, rgba(56,189,248,.08), transparent 60%),
    linear-gradient(135deg,#050507,#0b0d14,#090a10);
  color:var(--text);
}
a{color:inherit;text-decoration:none}

.wrap{max-width:1100px;margin:auto;padding:36px 18px 90px}
.top{
  display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
  padding:14px 0 22px;
}
.brand{font-weight:950;font-size:20px}
.brand span{
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  -webkit-background-clip:text;background-clip:text;color:transparent;
}

.btn{
  padding:12px 16px;border-radius:16px;font-weight:900;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.05);
  transition:.25s var(--ease);
  display:inline-flex;align-items:center;gap:10px;
  user-select:none;
  cursor:pointer;
}
.btn:hover{transform:translateY(-2px);border-color:rgba(214,177,94,.35);box-shadow:0 0 28px rgba(214,177,94,.12)}
.btn-primary{
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#111;border-color:transparent;
  box-shadow:0 0 40px rgba(214,177,94,.18);
}
.btn-primary:hover{filter:brightness(1.02)}
.btn-whatsapp{
  background:rgba(34,197,94,.12);
  border-color:rgba(34,197,94,.25);
  color:#fff;
}
.btn-whatsapp:hover{border-color:rgba(34,197,94,.45);box-shadow:0 0 26px rgba(34,197,94,.18)}

.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:22px;
  position:relative;
  overflow:hidden;
}
.card:before{
  content:"";
  position:absolute;inset:-2px;
  background:radial-gradient(700px circle at 30% 0%, rgba(214,177,94,.18), transparent 55%);
  opacity:.7;
  pointer-events:none;
  mask-image: radial-gradient(900px circle at 50% 30%, #000 45%, transparent 80%);
}
.card > *{position:relative}

.h1{font-size:36px;font-weight:950;letter-spacing:-.02em;line-height:1.1}
.p{margin-top:10px;color:var(--muted);line-height:1.7}
.hr{height:1px;background:rgba(255,255,255,.08);margin:18px 0}

.form{
  display:grid;gap:12px;margin-top:16px;
  max-width:520px;
}
label{font-weight:900;font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:var(--muted2)}
input{
  width:100%;
  padding:14px 14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.22);
  color:#fff;
  outline:none;
}
input:focus{border-color:rgba(214,177,94,.35);box-shadow:0 0 22px rgba(214,177,94,.10)}
.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.err{margin-top:10px;color:#ffb4b4;font-weight:900;display:none}

.kicker{
  display:flex;align-items:center;gap:10px;
  color:var(--muted2);
  font-size:12px;
  letter-spacing:.22em;
  font-weight:950;
  text-transform:uppercase;
}
.kdot{
  width:8px;height:8px;border-radius:999px;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  box-shadow:0 0 18px rgba(214,177,94,.22);
}

.dashboard{display:none;margin-top:14px}

/* Summary */
.grid{
  margin-top:14px;
  display:grid;
  gap:14px;
}
@media(min-width:980px){ .grid{grid-template-columns:1fr 1.2fr} }

.box{
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.03);
  border-radius:18px;
  padding:16px;
}
.title{font-weight:950;font-size:14px}
.small{margin-top:8px;color:var(--muted);font-size:13px;line-height:1.6}
.pillRow{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}
.pill{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 10px;border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  color:rgba(255,255,255,.86);
  font-size:12px;font-weight:900;
}
.pill strong{color:#fff}
.pill.gold{
  border-color:rgba(214,177,94,.22);
  background:rgba(214,177,94,.10);
}

/* Table */
.tableWrap{
  margin-top:12px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.03);
  border-radius:18px;
  overflow:hidden;
}
.tblHead{
  padding:12px 14px;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border-bottom:1px solid rgba(255,255,255,.08);
  display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
}
.tblHead .left{display:flex;flex-direction:column;gap:4px}
.tblHead .left b{font-weight:950}
.tblHead .left span{color:var(--muted);font-size:13px}
.tblControls{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.search{
  display:flex;align-items:center;gap:10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  border-radius:14px;
  padding:10px 12px;
}
.search input{
  border:none;background:transparent;padding:0;
  outline:none;color:#fff;width:220px;
}
.search input::placeholder{color:rgba(255,255,255,.38)}

table{width:100%;border-collapse:collapse}
th, td{padding:12px 14px;text-align:left;vertical-align:middle}
th{
  font-size:12px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(255,255,255,.55);
  font-weight:950;
  border-bottom:1px solid rgba(255,255,255,.08);
}
tr{border-bottom:1px solid rgba(255,255,255,.06)}
tr:last-child{border-bottom:none}
td{color:rgba(255,255,255,.88);font-size:13px}
.mono{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:12.5px;color:rgba(255,255,255,.92);
  background:rgba(0,0,0,.18);
  border:1px solid rgba(255,255,255,.10);
  padding:6px 8px;border-radius:12px;
  display:inline-block;
  max-width:100%;
  overflow:hidden;text-overflow:ellipsis;
}
.rowActions{display:flex;gap:8px;flex-wrap:wrap}
.copyBtn{
  padding:9px 10px;border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  font-weight:950;color:#fff;
  cursor:pointer;
  transition:.2s var(--ease);
  user-select:none;
  white-space:nowrap;
}
.copyBtn:hover{transform:translateY(-1px);border-color:rgba(214,177,94,.35);box-shadow:0 0 20px rgba(214,177,94,.10)}
.copyBtn.gold{
  border-color:rgba(214,177,94,.22);
  background:rgba(214,177,94,.10);
}

/* Mobile table -> cards */
@media(max-width:760px){
  table, thead, tbody, th, td, tr{display:block;width:100%}
  thead{display:none}
  tr{
    border-bottom:1px solid rgba(255,255,255,.08);
    padding:14px 14px;
  }
  td{padding:8px 0}
  td::before{
    content:attr(data-label);
    display:block;
    color:rgba(255,255,255,.55);
    font-weight:950;
    font-size:12px;
    letter-spacing:.14em;
    text-transform:uppercase;
    margin-bottom:6px;
  }
}

/* Toast */
.toast{
  position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
  background:rgba(0,0,0,.65);
  border:1px solid rgba(255,255,255,.14);
  padding:10px 12px;border-radius:999px;
  color:rgba(255,255,255,.9);
  font-weight:950;font-size:12px;
  opacity:0;pointer-events:none;
  transition:.25s var(--ease);
}
.toast.show{opacity:1}

/* Modal */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.78);
  align-items:center;
  justify-content:center;
  z-index:9999;
  padding:18px;
}
.modalCard{
  width:520px;
  max-width:100%;
  background:rgba(15,15,18,.96);
  border:1px solid rgba(255,255,255,.12);
  border-radius:22px;
  padding:18px;
  box-shadow:0 30px 90px rgba(0,0,0,.65);
}
.modalTop{
  display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
}
.modalTitle{
  font-size:18px;font-weight:950;
}
.modalMeta{
  margin-top:6px;color:rgba(255,255,255,.70);font-size:13px;line-height:1.55;
}
textarea{
  width:100%;
  margin-top:14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.22);
  color:#fff;
  padding:12px 12px;
  min-height:110px;
  outline:none;
  resize:vertical;
}
textarea:focus{
  border-color:rgba(214,177,94,.35);
  box-shadow:0 0 22px rgba(214,177,94,.10);
}
.modalActions{
  margin-top:14px;
  display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;
}
.modalHint{
  margin-top:10px;
  color:rgba(255,255,255,.45);
  font-size:12px;
  line-height:1.55;
}

/* Hide sensitive content until login */
#dashboard, #authBar { display:none; }
</style>
</head>

<body>
<div class="wrap">
  <div class="top">
    <div class="brand"><span>ScaleShield</span></div>

    <!-- Only visible AFTER login -->
    <div style="display:flex;gap:10px;flex-wrap:wrap;" id="authBar">
      <a class="btn" href="index.html">Back to site</a>
      <a class="btn" href="payment-details.html" target="_blank" rel="noopener">Payment Details</a>
      <a class="btn btn-primary" href="https://t.me/scaleshieldsupport" target="_blank" rel="noopener">Telegram</a>
      <a class="btn btn-whatsapp" href="https://wa.me/qr/ED5IWY7RKNSPC1" target="_blank" rel="noopener">WhatsApp</a>
      <button class="btn" id="btnLogout" type="button">Log Out</button>
    </div>
  </div>

  <div class="card">
    <div class="h1">Client Log In</div>
    <div class="p">Enter the login and password you received from support.</div>

    <!-- LOGIN FORM -->
    <form class="form" id="loginForm" autocomplete="off">
      <div>
        <label for="login">Login</label>
        <input id="login" name="login" autocomplete="username" placeholder="Your login" required />
      </div>
      <div>
        <label for="password">Password</label>
        <input id="password" name="password" type="password" autocomplete="current-password" placeholder="Your password" required />
      </div>

      <div class="actions">
        <button class="btn btn-primary" id="btnLogin" type="submit">Log In</button>
        <a class="btn btn-primary" href="https://t.me/scaleshieldsupport" target="_blank" rel="noopener">Support (Telegram)</a>
        <a class="btn btn-whatsapp" href="https://wa.me/qr/ED5IWY7RKNSPC1" target="_blank" rel="noopener">Support (WhatsApp)</a>
      </div>

      <div class="err" id="err">Invalid login or password.</div>
    </form>

    <div class="hr"></div>

    <!-- DASHBOARD (hidden until login) -->
    <div class="dashboard" id="dashboard">
      <div class="kicker"><span class="kdot"></span> CLIENT DASHBOARD</div>
      <div class="p" style="margin-top:10px;">Subscription + account mapping (organized view).</div>

      <div class="grid" id="summaryGrid"></div>

      <div class="tableWrap" style="margin-top:14px;">
        <div class="tblHead">
          <div class="left">
            <b>Ad Accounts</b>
            <span>Copy IDs or request replacement.</span>
          </div>

          <div class="tblControls">
            <div class="search" title="Search by name / Ad ID / BM ID">
              <span style="opacity:.7">üîé</span>
              <input id="search" placeholder="Search accounts‚Ä¶" />
            </div>
            <button class="copyBtn gold" id="copyBmTop" type="button">Copy BM ID</button>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th style="width:32%">Ad Account Name</th>
              <th style="width:24%">Ad Account ID</th>
              <th style="width:24%">Shared To BM ID</th>
              <th style="width:20%">Actions</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>

      <div class="p" style="margin-top:18px;">Need help? Contact support:</div>
      <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;">
        <a class="btn btn-primary" href="https://t.me/scaleshieldsupport" target="_blank" rel="noopener">Telegram Support</a>
        <a class="btn btn-whatsapp" href="https://wa.me/qr/ED5IWY7RKNSPC1" target="_blank" rel="noopener">WhatsApp Support</a>
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast">Copied</div>

<!-- REPLACE MODAL -->
<div class="modal" id="replaceModal" aria-hidden="true">
  <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modalTop">
      <div>
        <div class="modalTitle" id="modalTitle">Request Replacement</div>
        <div class="modalMeta" id="replaceMeta">Ad Account ID: ‚Äî</div>
      </div>
      <button class="copyBtn" type="button" id="closeModalBtn">Close</button>
    </div>

    <textarea id="replaceReason" placeholder="Enter reason for replacement (required)"></textarea>

    <div class="modalActions">
      <button class="copyBtn" type="button" id="cancelReplaceBtn">Cancel</button>
      <button class="copyBtn gold" type="button" id="sendReplaceBtn">Send</button>
    </div>

    <div class="modalHint">
      This will send a request to ScaleShield support with your client name, ad account ID and reason.
    </div>
  </div>
</div>

<script>
/*
IMPORTANT:
This is front-end login (GitHub Pages).
It hides data in the UI, but a technical user can still inspect code.
*/

/* ‚úÖ Worker endpoint (Telegram send) */
const WORKER_URL = "https://scaleshield-replace.lively-sunset-0c93.workers.dev";

/* ‚úÖ Client data (Titan Ltda + GRUPOD12) */
const USERS = [
  {
    name: "Titan Ltda",
    login: "Titantda",
    password: "Titan445566",
    packageName: "Top Agency Package Dimond",
    price: "$2250/month",
    paymentDue: "Every 21st of every month",
    adAccounts: [
      { name: "HelpNxt_1711_Aceone_Metal", adId: "1100253422137323", bmId: "1199667670512101" },
      { name: "HelpNxt_1712_paikori",        adId: "1687346411916980", bmId: "1199667670512101" },
      { name: "Sonda Sweet 2",              adId: "18852646662376339", bmId: "1199667670512101" },
      { name: "1",                          adId: "25565742243067148", bmId: "1199667670512101" },
      { name: "As9",                        adId: "1495797358151854", bmId: "1199667670512101" }
    ]
  },
  {
    name: "GRUPOD12",
    login: "Grupod12",
    password: "Grupod223311",
    packageName: "Top Agency Package Dimond",
    price: "$1950/month",
    paymentDue: "Every 24st of every month",
    adAccounts: [
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" },
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" },
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" },
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" },
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" },
      { name: "waiting for payment", adId: "waiting for payment", bmId: "waiting for payment" }
    ]
  }
];

const toast = document.getElementById("toast");
let toastTimer = null;

function showToast(msg){
  toast.textContent = msg;
  toast.classList.add("show");
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=>toast.classList.remove("show"), 1200);
}

async function copyText(text){
  try{
    await navigator.clipboard.writeText(text);
    showToast("Copied ‚úÖ");
    return;
  }catch(e){}
  const ta = document.createElement("textarea");
  ta.value = text;
  ta.style.position = "fixed";
  ta.style.top = "-9999px";
  document.body.appendChild(ta);
  ta.focus(); ta.select();
  try{
    document.execCommand("copy");
    showToast("Copied ‚úÖ");
  }catch(e){
    showToast("Copy failed");
  }
  document.body.removeChild(ta);
}

function escapeHtml(s){
  return String(s ?? "")
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}
function escapeAttr(s){ return escapeHtml(s).replaceAll('"',"&quot;"); }

/* ----- Replace modal state ----- */
let currentClientName = "";
let currentAdId = "";

const replaceModal = document.getElementById("replaceModal");
const replaceMeta = document.getElementById("replaceMeta");
const replaceReason = document.getElementById("replaceReason");
const closeModalBtn = document.getElementById("closeModalBtn");
const cancelReplaceBtn = document.getElementById("cancelReplaceBtn");
const sendReplaceBtn = document.getElementById("sendReplaceBtn");

function openReplaceModal(adId, clientName){
  currentAdId = adId;
  currentClientName = clientName;
  replaceMeta.textContent = "Ad Account ID: " + adId;
  replaceReason.value = "";
  replaceModal.style.display = "flex";
  replaceModal.setAttribute("aria-hidden","false");
  setTimeout(()=>replaceReason.focus(), 50);
}

function closeReplaceModal(){
  replaceModal.style.display = "none";
  replaceModal.setAttribute("aria-hidden","true");
  currentAdId = "";
  currentClientName = "";
}

closeModalBtn.addEventListener("click", closeReplaceModal);
cancelReplaceBtn.addEventListener("click", closeReplaceModal);
replaceModal.addEventListener("click", (e)=>{
  if(e.target === replaceModal) closeReplaceModal();
});
document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape" && replaceModal.style.display === "flex") closeReplaceModal();
});

async function sendReplacement(){
  const reason = replaceReason.value.trim();
  if(!reason){
    showToast("Please enter a reason");
    replaceReason.focus();
    return;
  }

  sendReplaceBtn.disabled = true;
  sendReplaceBtn.textContent = "Sending...";

  try{
    const resp = await fetch(WORKER_URL, {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({
        clientName: currentClientName,
        adAccountId: currentAdId,
        reason
      })
    });

    if(resp.ok){
      showToast("Request sent ‚úÖ");
      closeReplaceModal();
    }else{
      showToast("Send failed ‚ùå");
    }
  }catch(e){
    showToast("Network error ‚ùå");
  }finally{
    sendReplaceBtn.disabled = false;
    sendReplaceBtn.textContent = "Send";
  }
}
sendReplaceBtn.addEventListener("click", sendReplacement);

/* ----- Table build ----- */
function buildSummary(client){
  const grid = document.getElementById("summaryGrid");
  grid.innerHTML = "";

  const a = document.createElement("div");
  a.className = "box";
  a.innerHTML = `
    <div class="title">Subscription</div>
    <div class="small"><b>Client:</b> ${escapeHtml(client.name)}</div>
    <div class="small"><b>Package:</b> ${escapeHtml(client.packageName)}</div>
    <div class="pillRow">
      <div class="pill gold"><strong>Price</strong> ${escapeHtml(client.price)}</div>
      <div class="pill"><strong>Billing</strong> ${escapeHtml(client.paymentDue)}</div>
      <div class="pill"><strong>Accounts</strong> ${(client.adAccounts||[]).length}</div>
    </div>
  `;

  const b = document.createElement("div");
  b.className = "box";
  const bm = (client.adAccounts?.[0]?.bmId) || "";
  b.innerHTML = `
    <div class="title">Quick Actions</div>
    <div class="small">Copy the BM ID or search accounts.</div>
    <div class="pillRow">
      <button class="copyBtn gold" type="button" id="quickCopyBm">Copy BM ID</button>
      <button class="copyBtn" type="button" id="quickCopyAllAd">Copy All Ad IDs</button>
    </div>
    <div class="small" style="margin-top:12px;color:rgba(255,255,255,.75)">
      Default BM ID: <span class="mono" title="${escapeAttr(bm)}">${escapeHtml(bm || "‚Äî")}</span>
    </div>
  `;

  grid.appendChild(a);
  grid.appendChild(b);

  document.getElementById("quickCopyBm").addEventListener("click", ()=> bm ? copyText(bm) : showToast("No BM ID"));
  document.getElementById("quickCopyAllAd").addEventListener("click", ()=>{
    const ids = (client.adAccounts || []).map(x => x.adId).join("\n");
    if(!ids) return showToast("No Ad IDs");
    copyText(ids);
  });
}

function buildRows(client){
  const tbody = document.getElementById("rows");
  tbody.innerHTML = "";

  (client.adAccounts || []).forEach((a)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td data-label="Ad Account Name">${escapeHtml(a.name)}</td>
      <td data-label="Ad Account ID"><span class="mono" title="${escapeAttr(a.adId)}">${escapeHtml(a.adId)}</span></td>
      <td data-label="Shared To BM ID"><span class="mono" title="${escapeAttr(a.bmId)}">${escapeHtml(a.bmId)}</span></td>
      <td data-label="Actions">
        <div class="rowActions">
          <button class="copyBtn" data-copy="${escapeAttr(a.adId)}" type="button">Copy Ad ID</button>
          <button class="copyBtn" data-copy="${escapeAttr(a.bmId)}" type="button">Copy BM</button>
          <button class="copyBtn gold" data-replace="${escapeAttr(a.adId)}" type="button">Replace</button>
        </div>
      </td>
    `;
    tbody.appendChild(tr);
  });

  // Copy handlers
  document.querySelectorAll(".copyBtn[data-copy]").forEach(btn=>{
    btn.addEventListener("click", ()=>copyText(btn.getAttribute("data-copy") || ""));
  });

  // Replace handlers
  document.querySelectorAll(".copyBtn[data-replace]").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const adId = btn.getAttribute("data-replace") || "";
      openReplaceModal(adId, client.name);
    });
  });

  // Copy BM top button
  const bm = (client.adAccounts?.[0]?.bmId) || "";
  const copyBmTop = document.getElementById("copyBmTop");
  copyBmTop.onclick = ()=> bm ? copyText(bm) : showToast("No BM ID");
}

function filterRows(q){
  const query = (q || "").toLowerCase().trim();
  document.querySelectorAll("#rows tr").forEach(tr=>{
    tr.style.display = tr.textContent.toLowerCase().includes(query) ? "" : "none";
  });
}

/* ----- Login state ----- */
function showDashboard(client){
  document.getElementById("err").style.display = "none";
  document.getElementById("loginForm").style.display = "none";

  document.getElementById("authBar").style.display = "flex";
  document.getElementById("dashboard").style.display = "block";

  buildSummary(client);
  buildRows(client);

  const search = document.getElementById("search");
  search.value = "";
  search.oninput = ()=>filterRows(search.value);
}

function logout(){
  sessionStorage.removeItem("ss_login");
  sessionStorage.removeItem("ss_pass");
  document.getElementById("dashboard").style.display = "none";
  document.getElementById("authBar").style.display = "none";
  document.getElementById("loginForm").style.display = "grid";
  document.getElementById("err").style.display = "none";
  document.getElementById("login").value = "";
  document.getElementById("password").value = "";
}
document.getElementById("btnLogout").addEventListener("click", logout);

document.getElementById("loginForm").addEventListener("submit", (e)=>{
  e.preventDefault();

  const login = document.getElementById("login").value.trim();
  const pass = document.getElementById("password").value;

  const client = USERS.find(u => u.login === login && u.password === pass);
  if(!client){
    document.getElementById("err").style.display = "block";
    return;
  }

  sessionStorage.setItem("ss_login", login);
  sessionStorage.setItem("ss_pass", pass);
  showDashboard(client);
});

// Auto login (same tab session only)
(function autoLogin(){
  const l = sessionStorage.getItem("ss_login") || "";
  const p = sessionStorage.getItem("ss_pass") || "";
  if(!l || !p) return;
  const client = USERS.find(u => u.login === l && u.password === p);
  if(client) showDashboard(client);
})();
</script>

</body>
</html>
